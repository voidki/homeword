{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport User from '../views/User.vue';\nimport Product from '../views/Product.vue';\nimport Main from '../views/Main.vue';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport { getToken } from '../utils/auth';\nVue.use(VueRouter);\n//1.创建路由组件\nconst routes = [{\n  path: '/',\n  component: Main,\n  redirect: '/home',\n  children: [{\n    path: 'user',\n    name: 'user',\n    component: User\n  }, {\n    path: 'product',\n    name: 'product',\n    component: Product\n  }, {\n    path: 'home',\n    name: 'home',\n    component: Home\n  }]\n}, {\n  path: '/login',\n  name: 'login',\n  component: Login\n}];\nconst router = new VueRouter({\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const token = getToken();\n  if (!token && to.name !== 'login') {\n    next({\n      name: 'Login'\n    });\n  } else if (token && to.name === 'login') {\n    next({\n      name: 'home'\n    });\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","User","Product","Main","Home","Login","getToken","use","routes","path","component","redirect","children","name","router","beforeEach","to","from","next","token"],"sources":["E:/homework/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport User from '../views/User.vue'\r\nimport Product from '../views/Product.vue';\r\nimport Main from '../views/Main.vue'\r\nimport Home from '../views/Home.vue'\r\nimport Login from '../views/Login.vue'\r\nimport {getToken} from '../utils/auth'\r\nVue.use(VueRouter)\r\n//1.创建路由组件\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        component: Main,\r\n        redirect:'/home',\r\n        children:[\r\n            { path: 'user', name:'user', component: User },\r\n            { path: 'product',  name:'product',component: Product },\r\n            { path: 'home', name:'home', component: Home }\r\n        ]\r\n    },\r\n    {\r\n        path:'/login',\r\n        name: 'login',\r\n        component: Login,\r\n    }\r\n   \r\n]\r\nconst router =  new VueRouter({\r\n    routes,\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n    const token = getToken();\r\n    if (!token && to.name!=='login'){\r\n        next({ name: 'Login' });\r\n    }else if(token && to.name==='login'){\r\n        next({name:'home'});\r\n    }else{\r\n        next();\r\n    }\r\n  })\r\nexport default router\r\n\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,KAAK,MAAM,oBAAoB;AACtC,SAAQC,QAAQ,QAAO,eAAe;AACtCP,GAAG,CAACQ,GAAG,CAACP,SAAS,CAAC;AAClB;AACA,MAAMQ,MAAM,GAAG,CACX;EACIC,IAAI,EAAE,GAAG;EACTC,SAAS,EAAEP,IAAI;EACfQ,QAAQ,EAAC,OAAO;EAChBC,QAAQ,EAAC,CACL;IAAEH,IAAI,EAAE,MAAM;IAAEI,IAAI,EAAC,MAAM;IAAEH,SAAS,EAAET;EAAK,CAAC,EAC9C;IAAEQ,IAAI,EAAE,SAAS;IAAGI,IAAI,EAAC,SAAS;IAACH,SAAS,EAAER;EAAQ,CAAC,EACvD;IAAEO,IAAI,EAAE,MAAM;IAAEI,IAAI,EAAC,MAAM;IAAEH,SAAS,EAAEN;EAAK,CAAC;AAEtD,CAAC,EACD;EACIK,IAAI,EAAC,QAAQ;EACbI,IAAI,EAAE,OAAO;EACbH,SAAS,EAAEL;AACf,CAAC,CAEJ;AACD,MAAMS,MAAM,GAAI,IAAId,SAAS,CAAC;EAC1BQ;AACJ,CAAC,CAAC;AACFM,MAAM,CAACC,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAClC,MAAMC,KAAK,GAAGb,QAAQ,EAAE;EACxB,IAAI,CAACa,KAAK,IAAIH,EAAE,CAACH,IAAI,KAAG,OAAO,EAAC;IAC5BK,IAAI,CAAC;MAAEL,IAAI,EAAE;IAAQ,CAAC,CAAC;EAC3B,CAAC,MAAK,IAAGM,KAAK,IAAIH,EAAE,CAACH,IAAI,KAAG,OAAO,EAAC;IAChCK,IAAI,CAAC;MAACL,IAAI,EAAC;IAAM,CAAC,CAAC;EACvB,CAAC,MAAI;IACDK,IAAI,EAAE;EACV;AACF,CAAC,CAAC;AACJ,eAAeJ,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}